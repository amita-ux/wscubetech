!function(e){"use strict";if(e(".ep-permission-manager-content").length>0){if("undefined"==typeof epRoleElementsData&&(window.epRoleElementsData={}),"undefined"==typeof epRoleElementsNonce&&(window.epRoleElementsNonce=""),0===e("#ep-permission-manager-styles").length){let t='\n                <style id="ep-permission-manager-styles">\n                    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }\n                    .ep-setting-item .ep-widget-badge.setting { \n                        background: #0073aa !important; \n                        color: #fff !important; \n                        font-size: 11px !important;\n                        font-weight: 600 !important;\n                    }\n                    .ep-setting-item .ep-widget-title i.dashicons { \n                        color: #0073aa; \n                        margin-right: 8px; \n                    }\n                    .ep-setting-item.selected { \n                        border-left-color: #00a32a !important; \n                    }\n                    .ep-setting-item.selected .ep-widget-title i.dashicons { \n                        color: #00a32a; \n                    }\n                    .ep-tab-button { \n                        transition: opacity 0.3s ease; \n                    }\n                </style>\n            ';e("head").append(t)}!function(){let t="",n="core-widgets",i="all",s=[],o=[],r="",a={};function d(){e("#ep-role-selector").on("change",(function(){t=e(this).val(),t?(localStorage.setItem("ep_selected_role",t),b(t)):(localStorage.removeItem("ep_selected_role"),E())})),e("#ep-subsite-selector").on("change",(function(){t=e(this).val(),t?(localStorage.setItem("ep_selected_subsite",t),b(t)):(localStorage.removeItem("ep_selected_subsite"),E())})),setTimeout((function(){if(e("#ep-role-selector").length>0){const n=localStorage.getItem("ep_selected_role");if(n){const i=e("#ep-role-selector");i.find('option[value="'+n+'"]').length>0?(i.val(n),t=n,b(n)):localStorage.removeItem("ep_selected_role")}}if(e("#ep-subsite-selector").length>0){const n=localStorage.getItem("ep_selected_subsite");if(n){const i=e("#ep-subsite-selector");i.find('option[value="'+n+'"]').length>0?(i.val(n),t=n,b(n)):localStorage.removeItem("ep_selected_subsite")}}}),200),e(".ep-tab-button").on("click",(function(){const t=n;n=e(this).data("category"),e(".ep-tab-button").removeClass("active"),e(this).addClass("active"),l(),"settings"===n?c():("settings"===t&&h(),"all"===n?e(".ep-widget-item").show():p(n))})),e(document).on("click",".ep-category-filter-btn",(function(){e(this).data("category");e(".ep-category-filter-btn").removeClass("bdt-button-primary-active bdt-button-default-active"),e(this).hasClass("bdt-button-primary")?e(this).addClass("bdt-button-primary-active"):e(this).addClass("bdt-button-default-active")})),e("#ep-select-all-role-elements").on("click",(function(){R()})),e("#ep-deselect-all-role-elements").on("click",(function(){x()})),e("#ep-widgets-search").on("input",(function(){m(e(this).val().toLowerCase().trim())})),e(document).on("click",".ep-type-filter-btn",(function(){var t=e(this).data("filter");e(".ep-type-filter-btn").removeClass("active").css({background:"#f0f0f1",color:"#3c434a",border:"1px solid #c3c4c7"}),e(this).addClass("active"),"all"===t?e(this).css({background:"#0073aa",color:"#fff",border:"1px solid #0073aa"}):"free"===t?e(this).css({background:"#00a32a",color:"#fff",border:"1px solid #00a32a"}):"pro"===t&&e(this).css({background:"#d63638",color:"#fff",border:"1px solid #d63638"}),i=t,f()})),e(".ep-save-role-elements").on("click",(function(){k()})),e(".ep-reset-role-elements").on("click",(function(){W()})),e(document).on("click",".ep-widget-item:not(.disabled)",(function(){const t=e(this).data("widget"),n=e(this).hasClass("selected");e(this).toggleClass("selected"),a&&(n?delete a[t]:a[t]="on")}))}function l(){e(".ep-tab-button").each((function(){e(this).hasClass("active")?e(this).css({background:"#0073aa",color:"#fff","border-bottom":"2px solid #0073aa"}):e(this).css({background:"#f0f0f1",color:"#3c434a","border-bottom":"1px solid #c3c4c7"})}))}function c(){if(void 0===s||!s)return e("#ep-widgets-grid").html("<p>No widgets data available. Please select a role first.</p>"),e("#ep-widgets-grid").show(),void e("#ep-role-elements-loading").hide();let n={};"undefined"!=typeof epRoleElementsData&&epRoleElementsData[t]&&(n=epRoleElementsData[t]);const i=s.filter((function(e){return"settings"===e.module_type}));let o="";i.forEach((function(e){let t=a&&"on"===a[e.name];o+='<div class="ep-widget-item ep-setting-item '+(t?"selected":"")+'" data-widget="'+e.name+'" data-category="settings" data-module-type="'+e.module_type+'">',o+='<div class="ep-widget-header">',o+='<h4 class="ep-widget-title"><i class="dashicons dashicons-admin-settings"></i> '+e.label+"</h4>",o+='<span class="ep-widget-badge setting">SETTING</span>',o+="</div>",o+="</div>"})),e("#ep-widgets-grid").html(o),e("#ep-widgets-grid").show(),e("#ep-role-elements-loading").hide(),l()}function u(t,n){if(n&&e(n).data("module-type")){return e(n).data("module-type")}return t.includes("woocommerce")||t.includes("wc-")||t.includes("contact-form-7")||t.includes("cf7")||t.includes("bbpress")||t.includes("buddypress")||t.includes("edd-")||t.includes("charitable")||t.includes("events-calendar")||t.includes("everest-forms")?"3rd-party-widgets":t.includes("background-")||t.includes("backdrop-filter")||t.includes("cursor-effects")||t.includes("confetti-effects")||t.includes("animated-gradient-background")||t.includes("animated-link")||t.includes("animated-heading")||t.includes("parallax")||t.includes("overlay")||t.includes("expand")||t.includes("smooth-scroller")||t.includes("live-copy")||t.includes("duplicator")||t.includes("custom-js")||t.includes("custom-css")||t.includes("-effects")||"equal-height"===t||"visibility-controls"===t||"content-protector"===t||"elementor"===t?"extensions":t.includes("dark-mode")||t.includes("age-gate")||t.includes("cookie-consent")||t.includes("adblock-detector")||t.includes("mega-menu")?"special-features":"core-widgets"}function p(e){n=e,"settings"!==n?f():c()}function m(e){f()}function f(){const t=e("#ep-widgets-search").val().toLowerCase().trim();e(".ep-widget-item").each((function(){const s=e(this).find(".ep-widget-title").text().toLowerCase(),o=e(this).find(".ep-widget-description").text().toLowerCase(),r=e(this).data("widget")||"",a=e(this).find(".ep-widget-badge").text().toLowerCase(),d=e(this).hasClass("selected");let l=!0;if(t){s.includes(t)||o.includes(t)||r.toLowerCase().includes(t)||(l=!1)}if(l&&"all"!==n&&"settings"!==n){u(r,this)!==n&&(l=!1)}l&&"all"!==i&&(("pro"!==i||a.includes("pro"))&&("free"!==i||a.includes("free"))&&("selected"!==i||d)||(l=!1)),l?(e(this).show()):(e(this).hide())}))}function h(){r&&(e("#ep-widgets-grid").html(r),e("#ep-widgets-grid").show(),e(".ep-widget-item").each((function(){const t=e(this).data("widget");a&&a[t]?e(this).addClass("selected"):e(this).removeClass("selected")})))}function g(){let t={"core-widgets":0,"3rd-party-widgets":0,extensions:0,"special-features":0,settings:0},n=[],i=[];e(".ep-widget-item").each((function(){const s=e(this).data("widget")||"",o=e(this).find(".ep-widget-title").text()||"",r=e(this).data("module-type")||"",a=e(this).hasClass("ep-setting-item")?"settings":u(s,this);i.push(s),"extensions"===a&&n.push({name:s,label:o,moduleType:r}),t.hasOwnProperty(a)?t[a]++:t[a]=1}))}function b(t){e("#ep-role-elements-container").show(),S(),e.ajax({url:ajaxurl,type:"POST",data:{action:"ep_get_role_elements",role:t,nonce:epRoleElementsNonce,ep_permission_manager_bypass:!0},success:function(e){if(e.success){var t=e.data.all_widgets,n=e.data.allowed_widgets,i={};Array.isArray(n)?n.forEach((function(e){i[e]="on"})):"object"==typeof n&&(i=n),s=t,o=n,v(t,i)}else T("Error loading widgets: "+e.data,"error")},error:function(e,t,n){T("Error loading widgets. Please try again.","error")}})}function v(t,i){let s="";t&&t.length>0?t.forEach((function(e){let t=i&&("on"===i[e.name]||!0===i[e.name]);s+='<div class="ep-widget-item '+(t?"selected":"")+'" data-widget="'+e.name+'" data-category="'+(e.content_type||"basic")+'" data-module-type="'+(e.module_type||"core-widgets")+'">',s+='<div class="ep-widget-header">',s+='<h4 class="ep-widget-title">'+e.label+"</h4>",s+='<span class="ep-widget-badge '+e.widget_type+'">'+e.widget_type+"</span>",s+="</div>",e.description&&(s+='<p class="ep-widget-description">'+e.description+"</p>"),s+="</div>"})):s='<div class="ep-loading"><i class="dashicons dashicons-warning"></i><p>No widgets available</p></div>',e("#ep-widgets-grid").html(s),e("#ep-widgets-grid").show(),e("#ep-role-elements-loading").hide(),r=s,a=i||{},l(),n="all",g()}d(),e(".ep-permission-manager-content").length>0&&0===e("#ep-widget-search").length&&e(".ep-permission-manager-controls").append('<div style="margin: 16px 0 8px 0;"><input type="text" id="ep-widget-search" class="bdt-input" placeholder="Search widgets..." style="width: 100%; max-width: 400px;"></div>');let w="",y="",_="";function C(){e(".ep-widget-item").each((function(){var t=e(this),n=!1,i=!1;if(n=!y||("pro"===y?t.find(".ep-widget-badge").hasClass("pro"):"free"!==y||t.find(".ep-widget-badge").hasClass("free")),_)if("forms"===_)i=-1!==(t.data("category")+"").toLowerCase().indexOf("form");else if("third-party"===_)i=-1!==(t.data("category")+"").toLowerCase().indexOf("third");else if(["new","post","custom","gallery","slider","carousel","template-builder","others","woocommerce","basic"].includes(_)){var s=(t.data("category")+"").toLowerCase().replace(/[_\s-]+/g,"-"),o=_.replace(/[_\s-]+/g,"-");i=-1!==s.indexOf(o)}else i=t.data("category")===_;else i=!0;var r=t.find(".ep-widget-title").text().toLowerCase(),a=t.find(".ep-widget-description").text().toLowerCase(),d=!w||-1!==r.indexOf(w)||-1!==a.indexOf(w);n&&i&&d?t.show():t.hide()}))}function R(){var t=e(".ep-widget-item:visible:not(.disabled)");t.addClass("selected"),a&&t.each((function(){const t=e(this).data("widget");t&&(a[t]="on")}))}function x(){var t=e(".ep-widget-item:visible");t.removeClass("selected"),a&&t.each((function(){const t=e(this).data("widget");t&&delete a[t]}))}function S(){e("#ep-widgets-grid").html('<div class="ep-loading"><i class="dashicons dashicons-update"></i><p>Loading elements...</p></div>')}function E(){e("#ep-role-elements-container").hide(),"undefined"!=typeof epIsMultisite&&epIsMultisite?(e("#ep-widgets-grid").html('<div class="ep-no-role-selected"><i class="dashicons dashicons-admin-site-alt3"></i><p>Please select a subsite to manage its element access</p></div>'),e(".ep-status-text").text("Select a subsite to manage its element access")):(e("#ep-widgets-grid").html('<div class="ep-no-role-selected"><i class="dashicons dashicons-admin-users"></i><p>Please select a user role to manage its element access</p></div>'),e(".ep-status-text").text("Select a role to manage its element access"))}function k(){if(!t){return void T("Please select a "+("undefined"!=typeof epIsMultisite&&epIsMultisite?"subsite":"role")+" first.","warning")}e(".ep-save-role-elements").prop("disabled",!0).html('<i class="dashicons dashicons-update" style="animation: spin 1s linear infinite;"></i> Saving...');let n={};s&&s.length>0&&s.forEach((function(t){let i=e('.ep-widget-item[data-widget="'+t.name+'"]');(i.length>0&&i.hasClass("selected")||a&&"on"===a[t.name])&&(n[t.name]="on")})),e.ajax({url:ajaxurl,type:"POST",data:{action:"ep_save_role_elements",role:t,elements:n,nonce:epRoleElementsNonce},success:function(i){i.success?("undefined"==typeof epRoleElementsData&&(epRoleElementsData={}),epRoleElementsData[t]=n,a=n,"undefined"==typeof epRoleElementsData&&(epRoleElementsData={}),epRoleElementsData[t]=n,T("Permission saved successfully! "+Object.keys(n).length+" elements configured for "+t+" role.","success"),e(".ep-save-role-elements").html('<i class="dashicons dashicons-yes"></i> Saved!').removeClass("bdt-button-primary").addClass("bdt-button-success"),setTimeout((function(){e(".ep-save-role-elements").html("Save Settings").removeClass("bdt-button-success").addClass("bdt-button-primary")}),2e3)):T("Error saving settings: "+i.data,"error")},error:function(e,t,n){T("Error saving settings. Please try again.","error")},complete:function(){e(".ep-save-role-elements").prop("disabled",!1)}})}function W(){if(!t){return void T("Please select a "+("undefined"!=typeof epIsMultisite&&epIsMultisite?"subsite":"role")+" first.","error")}let i="Are you sure you want to reset all elements for this "+("undefined"!=typeof epIsMultisite&&epIsMultisite?"subsite":"role")+" to default settings?";confirm(i)&&e.ajax({url:ajaxurl,type:"POST",data:{action:"ep_reset_role_elements",role:t,nonce:epRoleElementsNonce},success:function(i){if(i.success){"undefined"!=typeof epRoleElementsData&&delete epRoleElementsData[t],b(t),setTimeout((function(){e(".ep-tab-button").removeClass("active"),e('.ep-tab-button[data-category="core-widgets"]').addClass("active"),n="core-widgets",l(),f()}),100),T(("undefined"!=typeof epIsMultisite&&epIsMultisite?"Subsite":"Role")+" elements reset to default successfully!","success")}else T("Error resetting settings: "+i.data,"error")},error:function(){T("Error resetting settings. Please try again.","error")}})}function T(t,n){if("undefined"!=typeof bdtUIkit&&bdtUIkit.notification){let e="primary";"success"===n?e="success":"error"===n?e="danger":"warning"===n&&(e="warning"),bdtUIkit.notification({message:t,status:e,pos:"top-center",timeout:3e3})}else{let i="notice notice-info";"success"===n?i="notice notice-success":"error"===n?i="notice notice-error":"warning"===n&&(i="notice notice-warning");let s='<div class="'+i+' is-dismissible ep-temp-notice" style="position: fixed; top: 32px; right: 20px; z-index: 999999; min-width: 300px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);">';s+="<p><strong>"+t+"</strong></p>",s+='<button type="button" class="notice-dismiss" onclick="$(this).parent().fadeOut();"><span class="screen-reader-text">Dismiss this notice.</span></button>',s+="</div>",e("body").append(s),setTimeout((function(){e(".ep-temp-notice").fadeOut((function(){e(this).remove()}))}),3e3)}}e(document).on("click",".ep-category-filter-btn",(function(){var t=e(this).data("category"),n=e(this).hasClass("bdt-button-primary");""===t?(e(".ep-category-filter-btn.bdt-button-primary").removeClass("bdt-button-primary-active"),e(".ep-category-filter-btn.bdt-button-default").removeClass("bdt-button-default-active"),y="",_="",e('.ep-category-filter-btn.bdt-button-primary[data-category=""]').addClass("bdt-button-primary-active"),e('.ep-category-filter-btn.bdt-button-default[data-category=""]').addClass("bdt-button-default-active")):n?(y=t,e(".ep-category-filter-btn.bdt-button-primary").removeClass("bdt-button-primary-active"),e(this).addClass("bdt-button-primary-active")):(_=t,e(".ep-category-filter-btn.bdt-button-default").removeClass("bdt-button-default-active"),e(this).addClass("bdt-button-default-active")),C()})),y="",_="",e('.ep-category-filter-btn.bdt-button-primary[data-category=""]').addClass("bdt-button-primary-active"),e('.ep-category-filter-btn.bdt-button-default[data-category=""]').addClass("bdt-button-default-active"),E(),"undefined"!=typeof epIsMultisite&&epIsMultisite&&"undefined"!=typeof epIsMainSiteAdmin&&!epIsMainSiteAdmin&&"undefined"!=typeof epCurrentSubsiteId&&epCurrentSubsiteId&&(e("#ep-subsite-selector").length>0?e("#ep-subsite-selector").val(epCurrentSubsiteId).trigger("change"):e("#ep-role-selector").length>0&&e("#ep-role-selector").val(epCurrentSubsiteId).trigger("change"));function I(){-1!==window.location.hash.indexOf("element_pack_permission_manager")?e(".ep-permission-manager-save-section").show():e(".ep-permission-manager-save-section").hide()}I(),e(window).on("hashchange",I),e(document).on("input","#ep-widget-search",(function(){w=e(this).val().toLowerCase(),C()}))}()}var t={init:function(){this.bindEvents(),this.applyRoleFilters(),this.applyAdminSettingsFilters()},bindEvents:function(){e(document).on("elementor/editor/init",(function(){t.applyRoleFilters()})),e(document).on("elementor/panel/widgets/loaded",(function(){t.hideRestrictedWidgets()})),e(document).on("elementor/widgets/register",(function(){t.hideRestrictedWidgets()}))},applyRoleFilters:function(){if("undefined"!=typeof elementorFrontend){var e=elementorFrontend.config;e.ep_role_filters&&e.ep_role_filters.has_restrictions&&(this.hideRestrictedWidgets(),this.showRestrictionNotice())}},hideRestrictedWidgets:function(){if("undefined"!=typeof elementorFrontend){var t=elementorFrontend.config;if(t.ep_role_filters&&t.ep_role_filters.restricted_widgets){var n=t.ep_role_filters.restricted_widgets;n.forEach((function(t){var n=e('.elementor-element-wrapper[data-widget-type="'+t+'"]');n.length&&(n.hide(),n.addClass("ep-restricted"));var i=e('[data-widget-type="'+t+'"]');i.length&&(i.hide(),i.addClass("ep-restricted"))})),e(document).on("input",".elementor-panel-search-input",(function(){setTimeout((function(){n.forEach((function(t){var n=e('.elementor-element-wrapper[data-widget-type="'+t+'"]');n.length&&(n.hide(),n.addClass("ep-restricted"))}))}),100)})),e(document).on("click",".elementor-panel-category",(function(){setTimeout((function(){n.forEach((function(t){var n=e('.elementor-element-wrapper[data-widget-type="'+t+'"]');n.length&&(n.hide(),n.addClass("ep-restricted"))}))}),100)}))}}},showRestrictionNotice:function(){if("undefined"!=typeof elementorFrontend){var t=elementorFrontend.config;if(t.ep_role_filters&&t.ep_role_filters.has_restrictions&&!e(".ep-role-restriction-notice").length){var n=e('<div class="ep-role-restriction-notice notice notice-info is-dismissible"><p><strong>Element Pack:</strong> Some widgets are restricted based on your user role. Contact an administrator if you need access to additional widgets.</p></div>');e(".elementor-panel-header").after(n),n.find(".notice-dismiss").on("click",(function(){n.fadeOut()}))}}},getRestrictedWidgets:function(){return void 0!==window.epRestrictedWidgets?window.epRestrictedWidgets:"undefined"!=typeof elementorFrontend&&elementorFrontend.config.ep_role_filters&&elementorFrontend.config.ep_role_filters.restricted_widgets||[]},isWidgetRestricted:function(e){return-1!==this.getRestrictedWidgets().indexOf(e)},applyAdminSettingsFilters:function(){if(window.location.href.includes("element-pack")){var n=this.getRestrictedWidgets();0!==n.length&&(n.forEach((function(t){var n=t.replace("bdt-","");e(".ep-option-item-inner").each((function(){var t=e(this);t.find('input[name*="'+n+'"], input[id*="'+n+'"]').length>0&&(t.hide(),t.addClass("ep-restricted"))}))})),setTimeout((function(){"function"==typeof updateTotalStatus&&updateTotalStatus(),t.updateAdminCounts()}),500))}},updateAdminCounts:function(){e(".ep-used-widget").each((function(){var t=e(this).closest(".ep-options-parent").find(".ep-options .ep-used:visible").length;e(this).text(t)})),e(".ep-unused-widget").each((function(){var t=e(this).closest(".ep-options-parent").find(".ep-options .ep-unused:visible").length;e(this).text(t)}))}};e(document).ready((function(){t.init()})),window.ElementPackRoleFilters=t;var n={init:function(){this.waitForDependencies()},waitForDependencies:function(){void 0!==e&&"undefined"!=typeof elementor?this.setupRestrictedWidgetManagement():setTimeout(this.waitForDependencies.bind(this),100)},setupRestrictedWidgetManagement:function(){this.hideRestrictedWidgets(),this.setupEventListeners(),this.setupSearchMonitoring(),this.addCSSRules(),this.hideExtensionControlSections()},hideRestrictedWidgets:function(){void 0!==e?(this.hideRestrictedWidgetsFromPanel(),this.hideRestrictedWidgetsFromSearch()):setTimeout(this.hideRestrictedWidgets.bind(this),100)},hideRestrictedWidgetsFromPanel:function(){var t=this.getRestrictedWidgets();if(t&&t.length>0){var n=e("#elementor-panel-category-element-pack");n.length&&n.find(".elementor-element-wrapper").each((function(){var n=e(this),i=n.find('[class*="bdt-wi-"]');if(i.length){0;var s=null;if(i.each((function(){var t=e(this).attr("class");if(t){var n=t.match(/bdt-wi-([^\s]+)/);n&&(s="bdt-"+n[1])}})),s)t.includes(s)&&(n.remove())}}))}},hideRestrictedWidgetsFromSearch:function(){var t=this.getRestrictedWidgets();if(t&&t.length>0){var n=e("#elementor-panel-elements .elementor-element-wrapper"),i=e("#elementor-panel-elements-search-input").val();i&&i.length>0&&n.each((function(){var n=e(this),i=n.find('[class*="bdt-wi-"]');if(i.length){var s=null;if(i.each((function(){var t=e(this).attr("class");if(t){var n=t.match(/bdt-wi-([^\s]+)/);n&&(s="bdt-"+n[1])}})),s)t.includes(s)&&(n.remove())}}))}},setupEventListeners:function(){if(this.hideRestrictedWidgets(),"undefined"!=typeof elementor&&elementor.channels&&elementor.channels.panel&&(elementor.channels.panel.on("change",(function(){setTimeout(n.hideRestrictedWidgets.bind(n),100)})),elementor.channels.panel.on("category:activated",(function(){setTimeout(n.hideRestrictedWidgets.bind(n),100)})),elementor.channels.panel.on("open",(function(){setTimeout(n.hideRestrictedWidgets.bind(n),100)})),elementor.channels.panel.on("widgets:loaded",(function(){setTimeout(n.hideRestrictedWidgets.bind(n),200)})),elementor.channels.panel.on("elements:loaded",(function(){setTimeout(n.hideRestrictedWidgets.bind(n),200)}))),"undefined"!=typeof MutationObserver){var t=new MutationObserver((function(e){e.forEach((function(e){"childList"===e.type&&e.addedNodes.length>0&&setTimeout(n.hideRestrictedWidgets.bind(n),100)}))})),i=document.querySelector("#elementor-panel-category-element-pack");i&&t.observe(i,{childList:!0,subtree:!0});var s=document.querySelector("#elementor-panel-elements");s&&t.observe(s,{childList:!0,subtree:!0})}if(setInterval(this.hideRestrictedWidgets.bind(this),2e3),setInterval(this.hideExtensionControlSections.bind(this),500),e(document).on("DOMNodeInserted","#elementor-control-section_element_pack_confetti_controls",(function(){n.hideExtensionControlSections()})),e(document).on("DOMNodeInserted",".elementor-controls",(function(){setTimeout(n.hideExtensionControlSections.bind(n),100)})),e(document).on("DOMNodeInserted",'[id*="confetti"], [class*="confetti"]',(function(){setTimeout(n.hideExtensionControlSections.bind(n),50)})),e(document).on("DOMNodeInserted",".elementor-control",(function(){var t=e(this),i=t.attr("class")||"",s=n.getRestrictedWidgets();s&&s.length>0&&s.forEach((function(e){var n=e.replace("bdt-","");(i.includes("elementor-control-section_element_pack_"+n+"_controls")||i.includes("elementor-control-element_pack_"+n+"_section")||i.includes("section_element_pack_"+n+"_controls")||i.includes("element_pack_"+n+"_section")||i.includes("elementor-control elementor-control-section_element_pack_"+n+"_controls")||i.includes("elementor-control elementor-control-element_pack_"+n+"_section"))&&t.remove()}))})),e(document).on("elementor/editor/init",(function(){setTimeout(n.hideExtensionControlSections.bind(n),500)})),e(document).on("elementor/editor/widget/activated",(function(){setTimeout(n.hideExtensionControlSections.bind(n),100)})),e(document).on("elementor/editor/element/activated",(function(){setTimeout(n.hideExtensionControlSections.bind(n),100)})),e(document).on("elementor/editor/widget/activated",(function(e,t){setTimeout(n.hideExtensionControlSections.bind(n),300)})),e(document).on("elementor/panel/control/loaded",(function(){setTimeout(n.hideExtensionControlSections.bind(n),100)})),e(document).on("elementor/panel/control/opened",(function(){setTimeout(n.hideExtensionControlSections.bind(n),100)})),"undefined"!=typeof MutationObserver){var o=new MutationObserver((function(t){t.forEach((function(t){"childList"===t.type&&t.addedNodes.length>0&&t.addedNodes.forEach((function(t){if(1===t.nodeType){var i=e(t);(i.hasClass("elementor-control")||i.find(".elementor-control").length>0)&&setTimeout(n.hideExtensionControlSections.bind(n),50)}}))}))})),r=document.querySelector("#elementor-controls");r&&o.observe(r,{childList:!0,subtree:!0});var a=new MutationObserver((function(t){t.forEach((function(t){"childList"===t.type&&t.addedNodes.length>0&&t.addedNodes.forEach((function(t){if(1===t.nodeType){var i=e(t);if(i.hasClass("elementor-control")){var s=i.attr("class")||"",o=n.getRestrictedWidgets();if(o&&o.length>0)for(var r=0;r<o.length;r++){var a=o[r].replace("bdt-","");if(s.includes("elementor-control-section_element_pack_"+a+"_controls")||s.includes("elementor-control-element_pack_"+a+"_section")||s.includes("elementor-control elementor-control-section_element_pack_"+a+"_controls")||s.includes("elementor-control elementor-control-element_pack_"+a+"_section")){i.remove();var d="."+i.attr("class").replace(/\s+/g,".")+" { display: none !important; }";e("#ep-aggressive-control-hide").length||e("head").append('<style id="ep-aggressive-control-hide"></style>'),e("#ep-aggressive-control-hide").append(d);break}}}}}))}))}));r&&a.observe(r,{childList:!0,subtree:!0})}e(document).on("input","#elementor-panel-elements-search-input",(function(){var t=e(this).val().toLowerCase(),i=n.getRestrictedWidgets();if(i&&i.length>0&&i.some((function(e){return t.includes(e.replace("bdt-","").toLowerCase())})))return void e(this).val("");function s(){e("#elementor-panel-elements .elementor-element-wrapper").each((function(){var t=e(this),n=t.find('[class*="bdt-wi-"]');if(n.length){var s=null;n.each((function(){var t=e(this).attr("class");if(t){var n=t.match(/bdt-wi-([^\s]+)/);n&&(s="bdt-"+n[1])}})),s&&-1!==i.indexOf(s)&&t.remove()}}))}s(),setTimeout(s,10),setTimeout(s,50),setTimeout(s,100),setTimeout(s,200)})),e(document).on("DOMNodeInserted",".elementor-panel-elements-search-wrapper",(function(){n.hideRestrictedWidgetsFromSearch(),setTimeout(n.hideRestrictedWidgetsFromSearch.bind(n),50)})),e(document).on("click",".elementor-panel-elements-search-wrapper .elementor-panel-elements-search-input-clear",(function(){n.hideRestrictedWidgetsFromSearch(),setTimeout(n.hideRestrictedWidgetsFromSearch.bind(n),50)})),e(document).on("keyup","#elementor-panel-elements-search-input",(function(){n.hideRestrictedWidgetsFromSearch(),setTimeout(n.hideRestrictedWidgetsFromSearch.bind(n),50)})),e(document).on("focus","#elementor-panel-elements-search-input",(function(){n.hideRestrictedWidgetsFromSearch(),setTimeout(n.hideRestrictedWidgetsFromSearch.bind(n),50)})),e(document).on("DOMNodeInserted","#elementor-panel-elements",(function(){n.hideRestrictedWidgetsFromSearch(),setTimeout(n.hideRestrictedWidgetsFromSearch.bind(n),50)})),e(document).on("DOMSubtreeModified","#elementor-panel-elements",(function(){n.hideRestrictedWidgetsFromSearch(),setTimeout(n.hideRestrictedWidgetsFromSearch.bind(n),50)})),e(document).on("DOMNodeInserted","#elementor-panel-elements .elementor-element-wrapper",(function(){var t=e(this),i=t.find('[class*="bdt-wi-"]');if(i.length){var s=null;if(i.each((function(){var t=e(this).attr("class");if(t){var n=t.match(/bdt-wi-([^\s]+)/);n&&(s="bdt-"+n[1])}})),s){var o=n.getRestrictedWidgets();o&&-1!==o.indexOf(s)&&t.remove()}}}));var d=new MutationObserver((function(t){t.forEach((function(t){"childList"===t.type&&t.addedNodes.length>0&&t.addedNodes.forEach((function(t){if(1===t.nodeType){var i=e(t);if(i.hasClass("elementor-element-wrapper")){var s=i.find('[class*="bdt-wi-"]');if(s.length){var o=null;if(s.each((function(){var t=e(this).attr("class");if(t){var n=t.match(/bdt-wi-([^\s]+)/);n&&(o="bdt-"+n[1])}})),o){var r=n.getRestrictedWidgets();r&&-1!==r.indexOf(o)&&i.remove()}}}}}))}))})),l=document.querySelector("#elementor-panel-elements");l&&d.observe(l,{childList:!0,subtree:!0});var c=document.querySelector(".elementor-panel-elements-search-wrapper");c&&d.observe(c,{childList:!0,subtree:!0})},setupSearchMonitoring:function(){var t=document.querySelector("#elementor-panel-elements");t&&new MutationObserver((function(t){t.forEach((function(t){"childList"===t.type&&t.addedNodes.forEach((function(t){if(1===t.nodeType){var i=e(t);if(i.hasClass("elementor-element-wrapper")){var s=i.find('[class*="bdt-wi-"]');if(s.length){var o=null;if(s.each((function(){var t=e(this).attr("class");if(t){var n=t.match(/bdt-wi-([^\s]+)/);n&&(o="bdt-"+n[1])}})),o){var r=n.getRestrictedWidgets();r&&-1!==r.indexOf(o)&&i.remove()}}}}}))}))})).observe(t,{childList:!0,subtree:!0})},addCSSRules:function(){var e,t=document.createElement("style");if(t.textContent='\n                #elementor-panel-elements .elementor-element-wrapper[data-widget_type*="bdt-"] {\n                    transition: none !important;\n                }\n                #elementor-panel-elements .elementor-element-wrapper[data-widget_type*="bdt-"]:has([class*="bdt-wi-"]) {\n                    display: none !important;\n                }\n            ',document.head.appendChild(t),(e=n.getRestrictedWidgets())&&e.length>0){var i=Array.isArray(e)?e:Object.values(e),s="";i.forEach((function(e){s+=`#elementor-panel-elements .elementor-element-wrapper[data-widget_type="${e}"] { display: none !important; }\n`}));var o=document.createElement("style");o.textContent=s,document.head.appendChild(o)}if((e=n.getRestrictedWidgets())&&e.length>0){i=Array.isArray(e)?e:Object.values(e);var r="";i.forEach((function(e){var t=e.replace("bdt-","");r+=`\n                        .elementor-control.elementor-control-section_element_pack_${t}_controls,\n                        .elementor-control.elementor-control-element_pack_${t}_section,\n                        .elementor-control[class*="elementor-control-section_element_pack_${t}_controls"],\n                        .elementor-control[class*="elementor-control-element_pack_${t}_section"] {\n                            display: none !important;\n                            visibility: hidden !important;\n                            opacity: 0 !important;\n                            height: 0 !important;\n                            overflow: hidden !important;\n                        }\n                    `}));var a=document.createElement("style");a.textContent=r,a.id="ep-restricted-controls-css",document.head.appendChild(a)}},hideExtensionControlSections:function(){e(".bdt-ep-restricted-badge").closest(".elementor-control").remove()},getRestrictedWidgets:function(){if(void 0!==window.epRestrictedWidgets)return(e=window.epRestrictedWidgets)&&e.restricted_widgets?Array.isArray(e.restricted_widgets)?e.restricted_widgets:Object.values(e.restricted_widgets):[];if("undefined"!=typeof elementorFrontend&&elementorFrontend.config.ep_role_filters){var e=elementorFrontend.config.ep_role_filters.restricted_widgets;return Array.isArray(e)?e:[]}return[]}};e(document).ready((function(){n.init()})),window.ElementorRestrictedWidgets=n}(jQuery);